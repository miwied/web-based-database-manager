<div class="header">
  <div class="left">Mitgliederverwaltungsprogramm</div>
  <div class="right">
    Eingeloggt als:
    {{ tokenUserName | titlecase }}
    <img
      class="imgLogout"
      (click)="Logout()"
      src="../../../assets/Images/rsz_free-exit-logout-icon-2857-thumb.png"
    />
  </div>
</div>

<div class="title-block">
  <div class="title">
    Mitgliederverwaltung
    <div class="line"></div>
  </div>
</div>

<div class="buttons">
  <button
    class="addNewUser"
    mat-flat-button
    color="accent"
    (click)="openAddDialog()"
  >
    Elemente hinzufügen
  </button>

  <mat-form-field class="filter" appearance="fill">
    <mat-label>Filter</mat-label>
    <input
      matInput
      (keyup)="applyFilter($event)"
      placeholder="Filter"
      #input
      type="text"
      [(ngModel)]="value"
    />
    <button
      *ngIf="value"
      matSuffix
      mat-icon-button
      aria-label="Clear"
      (click)="value = ''"
    >
      <mat-icon>close</mat-icon>
    </button>
  </mat-form-field>
</div>

<div class="mat-elevation-z8 container">
  <div class="container-table">
    <table mat-table [dataSource]="dataSource" multiTemplateDataRows matSort>
      <ng-container
        matColumnDef="{{ column }}"
        *ngFor="let column of displayedColumns"
      >
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ mapColumnName(column) }}
        </th>
        <td mat-cell *matCellDef="let element">
          {{
            column !== "fee"
              ? mapInformation(element[column])
              : element[column] + "€"
          }}
        </td>
      </ng-container>

      <ng-container matColumnDef="expandedDetail">
        <td
          mat-cell
          *matCellDef="let element"
          [attr.colspan]="displayedColumns.length"
        >
          <div
            class="member-edit"
            [@detailExpand]="
              element == expandedElement ? 'expanded' : 'collapsed'
            "
          >
            <app-member-edit
              class="member-edit-component"
              [member]="element"
              style="width: 100%"
            ></app-member-edit>
          </div>
        </td>
      </ng-container>

      <tr
        class="header"
        mat-header-row
        *matHeaderRowDef="displayedColumns; sticky: true"
      ></tr>
      <tr
        mat-row
        *matRowDef="let element; columns: displayedColumns"
        class="member-row"
        [class.expanded-row]="expandedElement === element"
        (click)="expandedElement = expandedElement === element ? null : element"
      >
        >
      </tr>
      <tr
        mat-row
        *matRowDef="let row; columns: ['expandedDetail']"
        class="edit-row"
      ></tr>
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4">Keine Daten gefunden.</td>
      </tr>
    </table>

    <div class="container-paginator">
      <mat-paginator
        [pageSizeOptions]="[15, 25, 50, 100]"
        aria-label="Select page of users"
      ></mat-paginator>
    </div>
  </div>
</div>

<div class="footer">
  <div class="middle">Sportverein © 2022</div>
</div>
